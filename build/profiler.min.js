(function(){"use strict";var typeOf=function(){for(var objectToString=Object.prototype.toString,class2type={},classNames=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],i=0,len=classNames.length;len>i;i++){var className=classNames[i];class2type["[object "+className+"]"]=className.toLowerCase()}return function(arg){return null===arg?"null":"object"==typeof arg||"function"==typeof arg?class2type[objectToString.call(arg)]||"object":typeof arg}}(),each=function(typeOf){var supportsForEach="forEach"in Array.prototype;return function(obj,fn,ctx){var type=typeOf(obj);if("array"===type)if(supportsForEach)obj.forEach(fn,ctx);else for(var i=0,len=obj.length;len>i;i++)fn.call(ctx,obj[i],i);else if("object"===type)for(var key in obj)fn.call(ctx,obj[key],key);else fn.call(ctx,obj)}}(typeOf),filter=function(each,typeOf){var supportsFilter="filter"in Array.prototype;return function(arg,fn,ctx){var result,type=typeOf(arg);return"array"===type?supportsFilter?result=arg.filter(fn,ctx):(result=[],each(arg,function(item,index){fn.call(ctx,item,index)&&result.push(item)},ctx)):"object"===type&&(result={},each(arg,function(item,key){fn.call(ctx,item,key)&&(result[key]=item)},ctx)),result}}(each,typeOf),on=function(doc){[].slice;var on,supportW3C="addEventListener"in doc;return supportW3C&&(on=function(elem,eventName,handler,capture){return elem.addEventListener(eventName,handler,capture||!1)}),on}(window.document),off=function(doc){var off,supportW3C="removeEventListener"in doc;return supportW3C&&(off=function(elem,eventName,handler){return elem.removeEventListener(eventName,handler)}),off}(window.document),start=window.__profiler__start__=window.__profiler__start__||(new Date).valueOf(),Record=function(key,name,tags){this.key=key,this.name=name,this.tags=tags,this.start=(new Date).valueOf()-start,this.completed=!1};Record.prototype={complete:function(){this.end=(new Date).valueOf()-start,this.duration=this.end-this.start,this.completed=!0},toString:function(){return this.name+" "+this.start+"-"+this.end+" ("+this.duration+")"}},function(each,filter,on,off,Record){var domReady,windowLoad,win=window,doc=win.document,supportsTiming="performance"in win&&"timing"in win.performance,EVT_DOM_READY="DOMContentLoaded",EVT_LOAD="load",start=window.__profiler__start__=window.__profiler__start__||(new Date).valueOf(),records=[],index={};win.profiler={clear:function(){records=getPending(),index=buildIndex()},start:function(name,tags){var record=new Record(name,name,tags||["script"]);records.push(record),index[name]=record},stop:function(name){index[name].complete()},end:function(){this.stop.apply(this,arguments)},report:function(){return{onready:domReady,records:getCompleted(),timing:getTiming(),onload:windowLoad}},reset:function(){records=[],index={}},send:function(){},setup:function(){}};var buildIndex=function(){var index={};return each(records,function(record){index[record.key]=record}),index},getCompleted=function(){return filter(records,function(record){return record.completed===!0})},getPending=function(){return filter(records,function(record){return record.completed===!1})},getTiming=function(){var timing=null;return supportsTiming&&(timing={},each(window.performance.timing,function(value,key){value>0&&(timing[key]=value-start)})),timing},onLoad=function(){off(win,EVT_LOAD,onLoad),windowLoad=(new Date).valueOf()-start},onDomReady=function(){off(doc,EVT_DOM_READY,onDomReady),domReady=(new Date).valueOf()-start};on(doc,EVT_DOM_READY,onDomReady),on(win,EVT_LOAD,onLoad);try{delete window.__profiler__start__}catch(e){}}(each,filter,on,off,Record)})();